{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Joseph\\\\Desktop\\\\BcThesis\\\\licenta_aplicatie\\\\code-puls\\\\client\\\\src\\\\pages\\\\takeTest.js\",\n    _s = $RefreshSig$();\n\nimport { Card, Button } from \"../components/defaultComponents\";\nimport CodeEditor from \"../components/CodeEditor\";\nimport styled from \"styled-components\";\nimport React, { useEffect, useState } from \"react\";\nimport { AppContext } from \"../context/context\";\nimport DefaultCode from \"../components/defaultCodeData\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst rootURL = \"http://localhost:5000/api\";\n\nfunction TakeTest({\n  test\n}) {\n  _s();\n\n  const {\n    setShowNavbar\n  } = React.useContext(AppContext);\n  setShowNavbar(false);\n  const {\n    testQuestions,\n    getTestQuestions,\n    isLoading,\n    aceLanguages,\n    codeEditorText,\n    setCodeEditorText,\n    encode,\n    decode\n  } = React.useContext(AppContext);\n  const [language, setLanguage] = useState(\"javascript\");\n  const [stdout, setStdout] = useState(\" \");\n  const [compileError, setCompileError] = useState();\n  const [testCaseStatus, setTestCaseStatus] = useState(\" \");\n  const [judgeResponse, setJudgeResponse] = useState();\n  const [isConsoleLoading, setIsConsoleLoading] = useState(false);\n  useEffect(() => {\n    getTestQuestions(test.id);\n    const aceLanguage = aceLanguages.find(language => language.id == test.id_limbaj_programare);\n\n    if (aceLanguage) {\n      setLanguage(aceLanguage.name);\n    }\n\n    const defaultCode = DefaultCode.find(item => item.id == test.id_limbaj_programare);\n\n    if (defaultCode) {\n      setCodeEditorText(defaultCode.code);\n    }\n\n    console.log(\"onMount\");\n  }, []);\n  useEffect(() => {\n    console.log(\"judge response changed\");\n\n    if (judgeResponse) {\n      setStdout(decode(judgeResponse.stdout));\n      setTestCaseStatus(judgeResponse.status.description);\n      setCompileError(decode(judgeResponse.compile_output));\n    }\n  }, [judgeResponse]);\n\n  function executaBtnHandler() {\n    if (!isConsoleLoading) {\n      console.log(\"buton executa apasat\");\n      const assignment = {\n        id: test.id,\n        questionId: testQuestions[0].id,\n        source_cod: encode(codeEditorText),\n        language_id: test.id_limbaj_programare,\n        stdin: \"\"\n      };\n      console.log(assignment);\n      getJudgeAssessment(assignment);\n    }\n  }\n\n  function getCodeEditorTextCallback(text) {// setCodeEditorText(text);    \n  }\n\n  const getJudgeAssessment = async test => {\n    console.log(\"getting assessment from judge...\");\n    setIsConsoleLoading(true);\n    const judgeData = {\n      source_code: test.source_cod,\n      language_id: test.language_id,\n      stdin: test.stdin\n    };\n    console.log(test.source_cod);\n    const response = await axios({\n      method: \"post\",\n      url: `${rootURL}/questions/assess/${test.questionId}/${test.id}/1`,\n      data: judgeData\n    }).catch(err => console.log(err));\n\n    if (response) {\n      console.log(response.data);\n      setJudgeResponse(response.data);\n    }\n\n    setIsConsoleLoading(false);\n  };\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(LoadingWrapper, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lds-spinner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 57\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 68\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 79\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 90\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 101\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 112\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 123\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 134\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 145\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 156\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 167\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 178\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 28\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Wrapper, {\n      children: [/*#__PURE__*/_jsxDEV(ProblemCard, {\n        children: testQuestions.map(question => /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: question.descriere\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditorCard, {\n        children: /*#__PURE__*/_jsxDEV(CodeEditor, {\n          language: language\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ExecuteBtn, {\n        primary: true,\n        onClick: executaBtnHandler,\n        children: \"Executa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ConsoleCard, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Output:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 19\n          }, this), stdout && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: stdout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this), isConsoleLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Test Case Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 18\n          }, this), testCaseStatus && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: testCaseStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this), isConsoleLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this), compileError && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Compile Error:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 20\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: compileError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(SubmitBtn, {\n        secondary: true,\n        children: \"Trimite\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TakeTest, \"7MlDUq7pK9e0si2KN1bBGQEwVCQ=\");\n\n_c = TakeTest;\nconst LoadingWrapper = styled.section`\n  display: flex;\n  height: 90vh;\n  align-items: center;\n  justify-content: center;\n  \n  .lds-spinner {\n    color: official;\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .lds-spinner div {\n    transform-origin: 40px 40px;\n    animation: lds-spinner 1.2s linear infinite;\n  }\n  .lds-spinner div:after {\n    content: \" \";\n    display: block;\n    position: absolute;\n    top: 3px;\n    left: 37px;\n    width: 6px;\n    height: 18px;\n    border-radius: 20%;\n    background: blue;\n  }\n  .lds-spinner div:nth-child(1) {\n    transform: rotate(0deg);\n    animation-delay: -1.1s;\n  }\n  .lds-spinner div:nth-child(2) {\n    transform: rotate(30deg);\n    animation-delay: -1s;\n  }\n  .lds-spinner div:nth-child(3) {\n    transform: rotate(60deg);\n    animation-delay: -0.9s;\n  }\n  .lds-spinner div:nth-child(4) {\n    transform: rotate(90deg);\n    animation-delay: -0.8s;\n  }\n  .lds-spinner div:nth-child(5) {\n    transform: rotate(120deg);\n    animation-delay: -0.7s;\n  }\n  .lds-spinner div:nth-child(6) {\n    transform: rotate(150deg);\n    animation-delay: -0.6s;\n  }\n  .lds-spinner div:nth-child(7) {\n    transform: rotate(180deg);\n    animation-delay: -0.5s;\n  }\n  .lds-spinner div:nth-child(8) {\n    transform: rotate(210deg);\n    animation-delay: -0.4s;\n  }\n  .lds-spinner div:nth-child(9) {\n    transform: rotate(240deg);\n    animation-delay: -0.3s;\n  }\n  .lds-spinner div:nth-child(10) {\n    transform: rotate(270deg);\n    animation-delay: -0.2s;\n  }\n  .lds-spinner div:nth-child(11) {\n    transform: rotate(300deg);\n    animation-delay: -0.1s;\n  }\n  .lds-spinner div:nth-child(12) {\n    transform: rotate(330deg);\n    animation-delay: 0s;\n  }\n  @keyframes lds-spinner {\n    0% {\n      opacity: 1;\n    }\n    100% {\n      opacity: 0;\n    }\n  }\n  \n  \n`;\n_c2 = LoadingWrapper;\nconst Wrapper = styled.section`\n  display: grid;\n  height: 92vh;\n  width: 100vw;\n  grid-template-columns: repeat(2, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  grid-template-areas:\n    \"A    B\"\n    \"A    B\"\n    \"A    B\"\n    \"A    B\"\n    \"A    B\"\n    \"A    B\"\n    \"A    D\"\n    \"A    C\"\n    \"A    C\"\n    \"A    E\";\n  grid-column-gap: 2em;\n`;\n_c3 = Wrapper;\nconst ProblemCard = styled(Card)`\n  grid-area: A;  \n  \n  overflow:auto;\n  \n  \n`;\n_c4 = ProblemCard;\nconst EditorCard = styled(Card)`\n  grid-area: B;\n  margin-right: 2em;\n  margin-top: 3em;\n  align-items: streched\n  justify-items : streched;\n  \n`;\n_c5 = EditorCard;\nconst ConsoleCard = styled(Card)`\n  grid-area: C;\n  margin-right: 2em;  \n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  overflow:auto;\n  flex-wrap: wrap;\n`;\n_c6 = ConsoleCard;\nconst ExecuteBtn = styled(Button)`\n  height: 50px;\n  width: 150px;\n  grid-are: D;\n  justify-self: start;\n  align-self: center;\n`;\n_c7 = ExecuteBtn;\nconst SubmitBtn = styled(Button)`\n  height: 50px;\n  width: 150px;\n  grid-are: E;\n  justify-self: end;\n  align-self: center;\n  margin-right: 2em;\n`;\n_c8 = SubmitBtn;\nexport default TakeTest;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"TakeTest\");\n$RefreshReg$(_c2, \"LoadingWrapper\");\n$RefreshReg$(_c3, \"Wrapper\");\n$RefreshReg$(_c4, \"ProblemCard\");\n$RefreshReg$(_c5, \"EditorCard\");\n$RefreshReg$(_c6, \"ConsoleCard\");\n$RefreshReg$(_c7, \"ExecuteBtn\");\n$RefreshReg$(_c8, \"SubmitBtn\");","map":{"version":3,"sources":["C:/Users/Joseph/Desktop/BcThesis/licenta_aplicatie/code-puls/client/src/pages/takeTest.js"],"names":["Card","Button","CodeEditor","styled","React","useEffect","useState","AppContext","DefaultCode","axios","rootURL","TakeTest","test","setShowNavbar","useContext","testQuestions","getTestQuestions","isLoading","aceLanguages","codeEditorText","setCodeEditorText","encode","decode","language","setLanguage","stdout","setStdout","compileError","setCompileError","testCaseStatus","setTestCaseStatus","judgeResponse","setJudgeResponse","isConsoleLoading","setIsConsoleLoading","id","aceLanguage","find","id_limbaj_programare","name","defaultCode","item","code","console","log","status","description","compile_output","executaBtnHandler","assignment","questionId","source_cod","language_id","stdin","getJudgeAssessment","getCodeEditorTextCallback","text","judgeData","source_code","response","method","url","data","catch","err","map","question","descriere","LoadingWrapper","section","Wrapper","ProblemCard","EditorCard","ConsoleCard","ExecuteBtn","SubmitBtn"],"mappings":"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,CAACkE,OAAS;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAtFA;MAAMD,c;AAuFN,MAAME,OAAO,GAAGnE,MAAM,CAACkE,OAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAlBA;MAAMC,O;AAmBN,MAAMC,WAAW,GAAGpE,MAAM,CAACH,IAAD,CAAO;AACjC;AACA;AACA;AACA;AACA;AACA,CANA;MAAMuE,W;AAON,MAAMC,UAAU,GAAGrE,MAAM,CAACH,IAAD,CAAO;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,CAPA;MAAMwE,U;AAQN,MAAMC,WAAW,GAAGtE,MAAM,CAACH,IAAD,CAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CATA;MAAMyE,W;AAUN,MAAMC,UAAU,GAAGvE,MAAM,CAACF,MAAD,CAAS;AAClC;AACA;AACA;AACA;AACA;AACA,CANA;MAAMyE,U;AAON,MAAMC,SAAS,GAAGxE,MAAM,CAACF,MAAD,CAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,CAPA;MAAM0E,S;AASN,eAAehE,QAAf","sourcesContent":["import { Card, Button } from \"../components/defaultComponents\"\r\nimport CodeEditor from \"../components/CodeEditor\";\r\nimport styled from \"styled-components\";\r\nimport React, {useEffect, useState} from \"react\"\r\nimport {AppContext} from \"../context/context\"\r\nimport DefaultCode from \"../components/defaultCodeData\"\r\nimport axios from \"axios\";\r\nconst rootURL = \"http://localhost:5000/api\";\r\n\r\nfunction TakeTest({test}) {  \r\n  const {setShowNavbar} = React.useContext(AppContext);\r\n  setShowNavbar(false);\r\n\r\n  const {\r\n    testQuestions, getTestQuestions, isLoading,\r\n    aceLanguages,\r\n    codeEditorText, setCodeEditorText, encode,decode    \r\n      } = React.useContext(AppContext);  \r\n\r\n  const [language, setLanguage] = useState(\"javascript\")  \r\n  const [stdout, setStdout] = useState(\" \");\r\n  const [compileError,setCompileError] = useState();\r\n  const [testCaseStatus, setTestCaseStatus]=useState(\" \");\r\n  const [judgeResponse, setJudgeResponse] = useState();\r\n  const [isConsoleLoading, setIsConsoleLoading] = useState(false)\r\n  \r\n  useEffect(() => {    \r\n    getTestQuestions(test.id);\r\n    const aceLanguage = aceLanguages.find((language => language.id == test.id_limbaj_programare))\r\n    if(aceLanguage){\r\n      setLanguage(aceLanguage.name)\r\n    }   \r\n    const defaultCode = DefaultCode.find((item => item.id == test.id_limbaj_programare))\r\n    if(defaultCode) {\r\n      setCodeEditorText(defaultCode.code);\r\n    }\r\n    console.log(\"onMount\")\r\n    \r\n}, [])\r\n\r\nuseEffect(() => {\r\n  console.log(\"judge response changed\");\r\n  if(judgeResponse) {\r\n    setStdout(decode(judgeResponse.stdout))\r\n    setTestCaseStatus(judgeResponse.status.description)\r\n    setCompileError(decode(judgeResponse.compile_output))\r\n  }\r\n}, [judgeResponse])\r\n\r\n  function executaBtnHandler() {\r\n    if(!isConsoleLoading){\r\n      console.log(\"buton executa apasat\")\r\n      const assignment = {\r\n        id : test.id,\r\n        questionId : testQuestions[0].id,\r\n        source_cod : encode(codeEditorText),\r\n        language_id : test.id_limbaj_programare,\r\n        stdin : \"\"\r\n      }\r\n      console.log(assignment);\r\n      getJudgeAssessment(assignment)\r\n    }\r\n  }\r\n\r\n  function getCodeEditorTextCallback(text) {\r\n    // setCodeEditorText(text);    \r\n  }\r\n\r\n  const getJudgeAssessment = async (test) => {\r\n    console.log(\"getting assessment from judge...\");\r\n    setIsConsoleLoading(true);\r\n    const judgeData = {\r\n        source_code : test.source_cod,\r\n        language_id : test.language_id,\r\n        stdin : test.stdin\r\n    }\r\n    console.log(test.source_cod)\r\n    const response  = await axios({\r\n        method : \"post\",\r\n        url : `${rootURL}/questions/assess/${test.questionId}/${test.id}/1`,\r\n        data: judgeData\r\n    })\r\n    .catch((err) => console.log(err));\r\n\r\n    if(response) {\r\n        console.log(response.data)\r\n        setJudgeResponse(response.data);\r\n    }\r\n    setIsConsoleLoading(false);\r\n}\r\n\r\n\r\n\r\n\r\nif(isLoading) {\r\n  return ( <LoadingWrapper><div className=\"lds-spinner\"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></LoadingWrapper>)\r\n}  \r\n  \r\n  return (\r\n    <div>      \r\n      <Wrapper>\r\n        <ProblemCard>   \r\n        {testQuestions.map((question) => (\r\n          <h3>{question.descriere}</h3>\r\n        ))}\r\n        {/* <h3>afljad;kfljad;klfja;dkljfak;lj;lj;dsj;ldjsja afa;dfjak;ldjfakdjfkl;adsf;kladj;kjj;jdaf;fs</h3> */}\r\n        </ProblemCard>\r\n        <EditorCard>\r\n          <CodeEditor language = {language}></CodeEditor>\r\n        </EditorCard>\r\n        <ExecuteBtn primary onClick={executaBtnHandler}>Executa</ExecuteBtn>\r\n          <ConsoleCard>\r\n            <div> <p>Output:</p>\r\n            {stdout && (\r\n              <p>{stdout}</p>\r\n            )}\r\n            {isConsoleLoading && (\r\n              <p>Loading...</p>\r\n            )}\r\n            </div>\r\n            <div><p>Test Case Status:</p>\r\n            {testCaseStatus && (\r\n              <p>{testCaseStatus}</p>\r\n            )}\r\n            {isConsoleLoading && (\r\n              <p>Loading...</p>\r\n            )}\r\n            </div>\r\n            {compileError && (\r\n              <div>\r\n              <div><p>Compile Error:</p></div>\r\n              <p>{compileError}</p>\r\n              </div>\r\n            )}\r\n           \r\n          </ConsoleCard>\r\n        <SubmitBtn secondary>Trimite</SubmitBtn>\r\n      </Wrapper>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nconst LoadingWrapper = styled.section `\r\n  display: flex;\r\n  height: 90vh;\r\n  align-items: center;\r\n  justify-content: center;\r\n  \r\n  .lds-spinner {\r\n    color: official;\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 80px;\r\n    height: 80px;\r\n  }\r\n  .lds-spinner div {\r\n    transform-origin: 40px 40px;\r\n    animation: lds-spinner 1.2s linear infinite;\r\n  }\r\n  .lds-spinner div:after {\r\n    content: \" \";\r\n    display: block;\r\n    position: absolute;\r\n    top: 3px;\r\n    left: 37px;\r\n    width: 6px;\r\n    height: 18px;\r\n    border-radius: 20%;\r\n    background: blue;\r\n  }\r\n  .lds-spinner div:nth-child(1) {\r\n    transform: rotate(0deg);\r\n    animation-delay: -1.1s;\r\n  }\r\n  .lds-spinner div:nth-child(2) {\r\n    transform: rotate(30deg);\r\n    animation-delay: -1s;\r\n  }\r\n  .lds-spinner div:nth-child(3) {\r\n    transform: rotate(60deg);\r\n    animation-delay: -0.9s;\r\n  }\r\n  .lds-spinner div:nth-child(4) {\r\n    transform: rotate(90deg);\r\n    animation-delay: -0.8s;\r\n  }\r\n  .lds-spinner div:nth-child(5) {\r\n    transform: rotate(120deg);\r\n    animation-delay: -0.7s;\r\n  }\r\n  .lds-spinner div:nth-child(6) {\r\n    transform: rotate(150deg);\r\n    animation-delay: -0.6s;\r\n  }\r\n  .lds-spinner div:nth-child(7) {\r\n    transform: rotate(180deg);\r\n    animation-delay: -0.5s;\r\n  }\r\n  .lds-spinner div:nth-child(8) {\r\n    transform: rotate(210deg);\r\n    animation-delay: -0.4s;\r\n  }\r\n  .lds-spinner div:nth-child(9) {\r\n    transform: rotate(240deg);\r\n    animation-delay: -0.3s;\r\n  }\r\n  .lds-spinner div:nth-child(10) {\r\n    transform: rotate(270deg);\r\n    animation-delay: -0.2s;\r\n  }\r\n  .lds-spinner div:nth-child(11) {\r\n    transform: rotate(300deg);\r\n    animation-delay: -0.1s;\r\n  }\r\n  .lds-spinner div:nth-child(12) {\r\n    transform: rotate(330deg);\r\n    animation-delay: 0s;\r\n  }\r\n  @keyframes lds-spinner {\r\n    0% {\r\n      opacity: 1;\r\n    }\r\n    100% {\r\n      opacity: 0;\r\n    }\r\n  }\r\n  \r\n  \r\n`;\r\nconst Wrapper = styled.section`\r\n  display: grid;\r\n  height: 92vh;\r\n  width: 100vw;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  grid-template-rows: repeat(10, 1fr);\r\n  grid-template-areas:\r\n    \"A    B\"\r\n    \"A    B\"\r\n    \"A    B\"\r\n    \"A    B\"\r\n    \"A    B\"\r\n    \"A    B\"\r\n    \"A    D\"\r\n    \"A    C\"\r\n    \"A    C\"\r\n    \"A    E\";\r\n  grid-column-gap: 2em;\r\n`;\r\nconst ProblemCard = styled(Card)`\r\n  grid-area: A;  \r\n  \r\n  overflow:auto;\r\n  \r\n  \r\n`;\r\nconst EditorCard = styled(Card)`\r\n  grid-area: B;\r\n  margin-right: 2em;\r\n  margin-top: 3em;\r\n  align-items: streched\r\n  justify-items : streched;\r\n  \r\n`;\r\nconst ConsoleCard = styled(Card)`\r\n  grid-area: C;\r\n  margin-right: 2em;  \r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  overflow:auto;\r\n  flex-wrap: wrap;\r\n`;\r\nconst ExecuteBtn = styled(Button)`\r\n  height: 50px;\r\n  width: 150px;\r\n  grid-are: D;\r\n  justify-self: start;\r\n  align-self: center;\r\n`;\r\nconst SubmitBtn = styled(Button)`\r\n  height: 50px;\r\n  width: 150px;\r\n  grid-are: E;\r\n  justify-self: end;\r\n  align-self: center;\r\n  margin-right: 2em;\r\n`;\r\n\r\nexport default TakeTest;"]},"metadata":{},"sourceType":"module"}