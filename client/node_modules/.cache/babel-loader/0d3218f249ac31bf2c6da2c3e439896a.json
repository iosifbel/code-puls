{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Joseph\\\\Desktop\\\\BcThesis\\\\licenta_aplicatie\\\\code-puls\\\\client\\\\src\\\\pages\\\\evaluateTest.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport theme from \"../Assets/theme\";\nimport { AppContext } from \"../context\";\nimport { QuestionSlider, CodeEditor, AlertBar } from \"../components\";\nimport { Card, Button } from \"../components/defaultComponents\";\nimport { Formik, useFormik } from \"formik\";\nimport * as yup from \"yup\";\nimport { Form, Col } from \"react-bootstrap\"; // import \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport axios, { handleAxiosError, handleUnexpectedError } from \"axios\";\nimport { utils } from \"../context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  feedback: yup.string(),\n  finalGrade: yup.string().matches(/^([1-9]{1}(\\.\\d{1,2})?|10)$/, \"Format acceptat: 9.97\").required(\"Nota finală trebuie completată\")\n});\n\nconst processData = data => {\n  try {\n    let {\n      incercare,\n      evaluareAutomata\n    } = data;\n    data.incercare = JSON.parse(incercare);\n    data.evaluareAutomata = JSON.parse(evaluareAutomata);\n    const submission = [];\n    data.incercare.forEach((item, index) => {\n      submission.push({\n        // questionBody: data.questions[index],\n        questionCode: item,\n        assessment: data.evaluareAutomata[index]\n      });\n    });\n    return submission;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst getSubmission = async (student_id, test_id, setSubmission, setQuestions, setIsLoading, setAutomaticGrade, setLateStatus) => {\n  try {\n    setIsLoading(true);\n    const {\n      data\n    } = await axios.get(`${utils.rootURL}/grades/submission/${test_id}/${student_id}`); // console.log(data);\n\n    const submission = processData(data); // console.log(submission);\n\n    setSubmission(submission);\n    setQuestions(data.questions);\n    setAutomaticGrade(data.notaAutomata);\n    setLateStatus(data.intarziat === 1 ? da : nu);\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      handleAxiosError(error);\n    } else {\n      handleUnexpectedError(error);\n    }\n  }\n\n  setIsLoading(false);\n};\n\nconst gradeSubmission = async (submission, test_id, student_id, setIsLoading, removeTestInProgress, setAlert) => {\n  try {\n    setIsLoading(true);\n    const response = await axios({\n      method: \"put\",\n      url: `${utils.rootURL}/grades/grade/${test_id}/${student_id}`,\n      data: submission\n    });\n    console.log(response);\n\n    if (response.status === 200) {\n      setAlert({\n        open: true,\n        severity: \"success\",\n        message: response.data.message\n      }); // console.log(\"ceva\");\n\n      removeTestInProgress();\n    } else {\n      setAlert({\n        open: true,\n        severity: \"warning\",\n        message: response.data.message\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n\n  setIsLoading(false);\n};\n\nfunction EvaluateTest() {\n  _s();\n\n  const {\n    setShowNavbar,\n    testState,\n    removeTestInProgress\n  } = useContext(AppContext);\n  const [submission, setSubmission] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSubmitLoading, setIsSubmitLoading] = useState(false);\n  const [questions, setQuestions] = useState([]);\n  const [automaticGrade, setAutomaticGrade] = useState();\n  const [lateStatus, setLateStatus] = useState();\n  const [currentQuestion, setCurrentQuestion] = useState({\n    questionCode: \"\",\n    assessment: {\n      stdout: \"\",\n      status: {\n        id: \"\",\n        description: \"\"\n      }\n    },\n    compile_output: \"\"\n  });\n  const [alert, setAlert] = useState({\n    open: false,\n    severity: \"success\",\n    message: \"\"\n  });\n  useEffect(() => {\n    console.log(\"esti in pagina de evaluare boss\");\n\n    if (testState.id) {\n      console.log(\"getting submission..\");\n      getSubmission(testState.id, testState.id_test, setSubmission, setQuestions, setIsLoading, setAutomaticGrade, setLateStatus);\n    }\n  }, []);\n  useEffect(() => {\n    if (submission) {\n      console.log(submission);\n      setCurrentQuestion(submission[0]);\n    }\n  }, [submission]);\n\n  const sliderHandler = (question, index) => {\n    setCurrentQuestion(submission[index]);\n  };\n\n  setShowNavbar(false);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AlertBar, {\n      open: alert.open,\n      severity: alert.severity,\n      message: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Formik, {\n      validateOnSubmit: true,\n      validationSchema: schema,\n      onSubmit: values => {\n        const {\n          finalGrade,\n          feedback\n        } = values;\n        const data = {\n          finalGrade,\n          feedback\n        };\n        console.log(data);\n        gradeSubmission(data, testState.id_test, testState.id, setIsSubmitLoading, removeTestInProgress, setAlert);\n      },\n      initialValues: {\n        finalGrade: \"\",\n        feedback: \"\",\n        automaticGrade: automaticGrade,\n        late: lateStatus\n      },\n      children: ({\n        handleSubmit,\n        handleChange,\n        handleBlur,\n        values,\n        touched,\n        isValid,\n        errors\n      }) => /*#__PURE__*/_jsxDEV(Form, {\n        noValidate: true,\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(Wrapper, {\n          children: [/*#__PURE__*/_jsxDEV(EditorCard, {\n            children: [/*#__PURE__*/_jsxDEV(QuestionSlider, {\n              questions: questions,\n              callback: sliderHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CodeEditor, {\n              language: \"javascript\",\n              value: currentQuestion.questionCode,\n              callback: () => {}\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ConsoleCard, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Output:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this), currentQuestion.assessment.stdout && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: currentQuestion.assessment.stdout\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Test Case Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 19\n              }, this), currentQuestion.assessment.status.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: currentQuestion.assessment.status.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this), currentQuestion.assessment.compileError && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Compile Error:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: currentQuestion.assessment.compileError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FeedbackCard, {\n            children: [/*#__PURE__*/_jsxDEV(Banner, {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Comentarii \\u0219i feedback\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n              rows: \"20\",\n              name: \"feedback\",\n              value: values.feedback,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(GradeCard, {\n            children: /*#__PURE__*/_jsxDEV(Form.Row, {\n              className: \"justify-content-around align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                column: true,\n                lg: \"auto\",\n                className: \"mr-2\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Not\\u0103 final\\u0103\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                className: \"mr-2\",\n                lg: \"auto\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                  className: \"text-center\",\n                  name: \"finalGrade\",\n                  type: \"text\",\n                  value: values.finalGrade,\n                  onBlur: handleBlur,\n                  onChange: handleChange,\n                  placeholder: \"Introdu nota\",\n                  isValid: touched.finalGrade && !errors.finalGrade,\n                  isInvalid: touched.finalGrade && !!errors.finalGrade\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                  type: \"invalid\",\n                  className: \"position-absolute feedback\",\n                  children: /*#__PURE__*/_jsxDEV(MuiAlert, {\n                    severity: \"error\",\n                    elevation: 6,\n                    variant: \"filled\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: errors.finalGrade\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 277,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Label, {\n                column: true,\n                lg: \"auto\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Not\\u0103 automat\\u0103\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                className: \"mr-2\",\n                children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                  className: \"text-center\",\n                  name: \"automaticGrade\",\n                  type: \"text\",\n                  value: values.automaticGrade,\n                  onBlur: handleBlur,\n                  onChange: handleChange,\n                  readOnly: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Label, {\n                column: true,\n                lg: \"auto\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Intarziat\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                  className: \"text-center\",\n                  name: \"late\",\n                  type: \"text\",\n                  value: values.late,\n                  onBlur: handleBlur,\n                  onChange: handleChange,\n                  readOnly: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SubmitBtn, {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Trimite\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(EvaluateTest, \"w42UsHzb2Ywzwx/8lVZg0AmJms4=\");\n\n_c = EvaluateTest;\nconst EditorCard = styled(Card)`\n  grid-area: A;\n  margin-left: 1em;\n  overflow: auto;\n`;\n_c2 = EditorCard;\nconst ConsoleCard = styled(Card)`\n  grid-area: B;\n  margin-left: 1em;\n  margin-top: 0.5em;\n  margin-bottom: 0.5em;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  overflow: auto;\n  flex-wrap: wrap;\n`;\n_c3 = ConsoleCard;\nconst FeedbackCard = styled(Card)`\n  grid-area: C;\n  margin-right: 1em;\n  margin-bottom: 1rem;\n  padding: 0;\n`;\n_c4 = FeedbackCard;\nconst Banner = styled.div`\n  padding: 0.7rem;\n  padding-left: 1.5rem;\n  background-color: ${theme.Grey1};\n  color: ${theme.mainBlack};\n  h2 {\n    margin: 0;\n    font-size: 1.3rem;\n  }\n`;\n_c5 = Banner;\nconst TextArea = styled.textarea`\n  padding: 2rem;\n  border: none;\n  resize: none;\n  outline: none;\n  height:100%\n  color: ${theme.mainBlack};\n  border-radius: 0 0 10px 10px;\n  font-size: 1rem;\n`;\n_c6 = TextArea;\nconst SubmitBtn = styled(Button)`\n  grid-area: E;\n  display: flex;\n  justify-content: center;\n  align-self: end;\n  justify-self: end;\n  width: 5rem;\n  height: 3rem;\n\n  margin-bottom: 0.5em;\n`;\n_c7 = SubmitBtn;\nconst GradeCard = styled(Card)`\n  grid-area: D;\n  display: flex;\n  justify-content: center;\n  margin-right: 1em;\n  background-color: ${theme.Grey1};\n  // p {\n  //   margin: 0;\n  // }\n  div {\n    font-size: 1rem;\n  }\n  .feedback {\n    width: auto;\n  }\n`;\n_c8 = GradeCard;\nconst Wrapper = styled.div`\n  display: grid;\n  height: 100%;\n  width: 100%;\n  margin-top: 1.5rem;\n  max-height: calc(93vh - 1.5rem);\n\n  font-size: 3rem;\n\n  p {\n    font-size: 1rem;\n  }\n\n  grid-template-columns: repeat(2, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  grid-template-areas:\n    \"A    C\"\n    \"A    C\"\n    \"A    C\"\n    \"A    C\"\n    \"A    C\"\n    \"A    C\"\n    \"A    D\"\n    \"B    E\"\n    \"B    E\"\n    \"B    E\";\n  grid-column-gap: 1em;\n`;\n_c9 = Wrapper;\nexport default EvaluateTest;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n\n$RefreshReg$(_c, \"EvaluateTest\");\n$RefreshReg$(_c2, \"EditorCard\");\n$RefreshReg$(_c3, \"ConsoleCard\");\n$RefreshReg$(_c4, \"FeedbackCard\");\n$RefreshReg$(_c5, \"Banner\");\n$RefreshReg$(_c6, \"TextArea\");\n$RefreshReg$(_c7, \"SubmitBtn\");\n$RefreshReg$(_c8, \"GradeCard\");\n$RefreshReg$(_c9, \"Wrapper\");","map":{"version":3,"sources":["C:/Users/Joseph/Desktop/BcThesis/licenta_aplicatie/code-puls/client/src/pages/evaluateTest.js"],"names":["useContext","useState","useEffect","styled","theme","AppContext","QuestionSlider","CodeEditor","AlertBar","Card","Button","Formik","useFormik","yup","Form","Col","MuiAlert","axios","handleAxiosError","handleUnexpectedError","utils","schema","object","shape","feedback","string","finalGrade","matches","required","processData","data","incercare","evaluareAutomata","JSON","parse","submission","forEach","item","index","push","questionCode","assessment","error","console","log","getSubmission","student_id","test_id","setSubmission","setQuestions","setIsLoading","setAutomaticGrade","setLateStatus","get","rootURL","questions","notaAutomata","intarziat","da","nu","isAxiosError","gradeSubmission","removeTestInProgress","setAlert","response","method","url","status","open","severity","message","EvaluateTest","setShowNavbar","testState","isLoading","isSubmitLoading","setIsSubmitLoading","automaticGrade","lateStatus","currentQuestion","setCurrentQuestion","stdout","id","description","compile_output","alert","id_test","sliderHandler","question","values","late","handleSubmit","handleChange","handleBlur","touched","isValid","errors","compileError","EditorCard","ConsoleCard","FeedbackCard","Banner","div","Grey1","mainBlack","TextArea","textarea","SubmitBtn","GradeCard","Wrapper"],"mappings":";;;AAAA,SAASA,UAAT,EAAqBC,QAArB,EAA+BC,SAA/B,QAAgD,OAAhD;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,SAASC,cAAT,EAAyBC,UAAzB,EAAqCC,QAArC,QAAqD,eAArD;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,iCAA7B;AACA,SAASC,MAAT,EAAiBC,SAAjB,QAAkC,QAAlC;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,IAAT,EAAeC,GAAf,QAA0B,iBAA1B,C,CACA;;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,KAAP,IAAgBC,gBAAhB,EAAkCC,qBAAlC,QAA+D,OAA/D;AACA,SAASC,KAAT,QAAsB,YAAtB;;;AAEA,MAAMC,MAAM,GAAGR,GAAG,CAACS,MAAJ,GAAaC,KAAb,CAAmB;AAChCC,EAAAA,QAAQ,EAAEX,GAAG,CAACY,MAAJ,EADsB;AAEhCC,EAAAA,UAAU,EAAEb,GAAG,CACZY,MADS,GAETE,OAFS,CAED,6BAFC,EAE8B,uBAF9B,EAGTC,QAHS,CAGA,gCAHA;AAFoB,CAAnB,CAAf;;AAQA,MAAMC,WAAW,GAAIC,IAAD,IAAU;AAC5B,MAAI;AACF,QAAI;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAAkCF,IAAtC;AACAA,IAAAA,IAAI,CAACC,SAAL,GAAiBE,IAAI,CAACC,KAAL,CAAWH,SAAX,CAAjB;AACAD,IAAAA,IAAI,CAACE,gBAAL,GAAwBC,IAAI,CAACC,KAAL,CAAWF,gBAAX,CAAxB;AACA,UAAMG,UAAU,GAAG,EAAnB;AACAL,IAAAA,IAAI,CAACC,SAAL,CAAeK,OAAf,CAAuB,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACtCH,MAAAA,UAAU,CAACI,IAAX,CAAgB;AACd;AACAC,QAAAA,YAAY,EAAEH,IAFA;AAGdI,QAAAA,UAAU,EAAEX,IAAI,CAACE,gBAAL,CAAsBM,KAAtB;AAHE,OAAhB;AAKD,KAND;AAOA,WAAOH,UAAP;AACD,GAbD,CAaE,OAAOO,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,CAjBD;;AAmBA,MAAMG,aAAa,GAAG,OACpBC,UADoB,EAEpBC,OAFoB,EAGpBC,aAHoB,EAIpBC,YAJoB,EAKpBC,YALoB,EAMpBC,iBANoB,EAOpBC,aAPoB,KAQjB;AACH,MAAI;AACFF,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,UAAM;AAAEpB,MAAAA;AAAF,QAAW,MAAMb,KAAK,CAACoC,GAAN,CACpB,GAAEjC,KAAK,CAACkC,OAAQ,sBAAqBP,OAAQ,IAAGD,UAAW,EADvC,CAAvB,CAFE,CAKF;;AACA,UAAMX,UAAU,GAAGN,WAAW,CAACC,IAAD,CAA9B,CANE,CAOF;;AACAkB,IAAAA,aAAa,CAACb,UAAD,CAAb;AACAc,IAAAA,YAAY,CAACnB,IAAI,CAACyB,SAAN,CAAZ;AACAJ,IAAAA,iBAAiB,CAACrB,IAAI,CAAC0B,YAAN,CAAjB;AACAJ,IAAAA,aAAa,CAACtB,IAAI,CAAC2B,SAAL,KAAmB,CAAnB,GAAuBC,EAAvB,GAA4BC,EAA7B,CAAb;AACD,GAZD,CAYE,OAAOjB,KAAP,EAAc;AACd,QAAIzB,KAAK,CAAC2C,YAAN,CAAmBlB,KAAnB,CAAJ,EAA+B;AAC7BxB,MAAAA,gBAAgB,CAACwB,KAAD,CAAhB;AACD,KAFD,MAEO;AACLvB,MAAAA,qBAAqB,CAACuB,KAAD,CAArB;AACD;AACF;;AACDQ,EAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,CA7BD;;AA+BA,MAAMW,eAAe,GAAG,OACtB1B,UADsB,EAEtBY,OAFsB,EAGtBD,UAHsB,EAItBI,YAJsB,EAKtBY,oBALsB,EAMtBC,QANsB,KAOnB;AACH,MAAI;AACFb,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,UAAMc,QAAQ,GAAG,MAAM/C,KAAK,CAAC;AAC3BgD,MAAAA,MAAM,EAAE,KADmB;AAE3BC,MAAAA,GAAG,EAAG,GAAE9C,KAAK,CAACkC,OAAQ,iBAAgBP,OAAQ,IAAGD,UAAW,EAFjC;AAG3BhB,MAAAA,IAAI,EAAEK;AAHqB,KAAD,CAA5B;AAMAQ,IAAAA,OAAO,CAACC,GAAR,CAAYoB,QAAZ;;AAEA,QAAIA,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3BJ,MAAAA,QAAQ,CAAC;AACPK,QAAAA,IAAI,EAAE,IADC;AAEPC,QAAAA,QAAQ,EAAE,SAFH;AAGPC,QAAAA,OAAO,EAAEN,QAAQ,CAAClC,IAAT,CAAcwC;AAHhB,OAAD,CAAR,CAD2B,CAM3B;;AACAR,MAAAA,oBAAoB;AACrB,KARD,MAQO;AACLC,MAAAA,QAAQ,CAAC;AACPK,QAAAA,IAAI,EAAE,IADC;AAEPC,QAAAA,QAAQ,EAAE,SAFH;AAGPC,QAAAA,OAAO,EAAEN,QAAQ,CAAClC,IAAT,CAAcwC;AAHhB,OAAD,CAAR;AAKD;AACF,GAzBD,CAyBE,OAAO5B,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;;AACDQ,EAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,CArCD;;AAuCA,SAASqB,YAAT,GAAwB;AAAA;;AACtB,QAAM;AAAEC,IAAAA,aAAF;AAAiBC,IAAAA,SAAjB;AAA4BX,IAAAA;AAA5B,MACJ9D,UAAU,CAACK,UAAD,CADZ;AAEA,QAAM,CAAC8B,UAAD,EAAaa,aAAb,IAA8B/C,QAAQ,EAA5C;AACA,QAAM,CAACyE,SAAD,EAAYxB,YAAZ,IAA4BjD,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAC0E,eAAD,EAAkBC,kBAAlB,IAAwC3E,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAACsD,SAAD,EAAYN,YAAZ,IAA4BhD,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAAC4E,cAAD,EAAiB1B,iBAAjB,IAAsClD,QAAQ,EAApD;AACA,QAAM,CAAC6E,UAAD,EAAa1B,aAAb,IAA8BnD,QAAQ,EAA5C;AACA,QAAM,CAAC8E,eAAD,EAAkBC,kBAAlB,IAAwC/E,QAAQ,CAAC;AACrDuC,IAAAA,YAAY,EAAE,EADuC;AAErDC,IAAAA,UAAU,EAAE;AACVwC,MAAAA,MAAM,EAAE,EADE;AAEVd,MAAAA,MAAM,EAAE;AAAEe,QAAAA,EAAE,EAAE,EAAN;AAAUC,QAAAA,WAAW,EAAE;AAAvB;AAFE,KAFyC;AAMrDC,IAAAA,cAAc,EAAE;AANqC,GAAD,CAAtD;AAQA,QAAM,CAACC,KAAD,EAAQtB,QAAR,IAAoB9D,QAAQ,CAAC;AACjCmE,IAAAA,IAAI,EAAE,KAD2B;AAEjCC,IAAAA,QAAQ,EAAE,SAFuB;AAGjCC,IAAAA,OAAO,EAAE;AAHwB,GAAD,CAAlC;AAMApE,EAAAA,SAAS,CAAC,MAAM;AACdyC,IAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;;AAEA,QAAI6B,SAAS,CAACS,EAAd,EAAkB;AAChBvC,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAC,MAAAA,aAAa,CACX4B,SAAS,CAACS,EADC,EAEXT,SAAS,CAACa,OAFC,EAGXtC,aAHW,EAIXC,YAJW,EAKXC,YALW,EAMXC,iBANW,EAOXC,aAPW,CAAb;AASD;AACF,GAfQ,EAeN,EAfM,CAAT;AAiBAlD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIiC,UAAJ,EAAgB;AACdQ,MAAAA,OAAO,CAACC,GAAR,CAAYT,UAAZ;AACA6C,MAAAA,kBAAkB,CAAC7C,UAAU,CAAC,CAAD,CAAX,CAAlB;AACD;AACF,GALQ,EAKN,CAACA,UAAD,CALM,CAAT;;AAOA,QAAMoD,aAAa,GAAG,CAACC,QAAD,EAAWlD,KAAX,KAAqB;AACzC0C,IAAAA,kBAAkB,CAAC7C,UAAU,CAACG,KAAD,CAAX,CAAlB;AACD,GAFD;;AAIAkC,EAAAA,aAAa,CAAC,KAAD,CAAb;AACA,sBACE;AAAA,4BACE,QAAC,QAAD;AACE,MAAA,IAAI,EAAEa,KAAK,CAACjB,IADd;AAEE,MAAA,QAAQ,EAAEiB,KAAK,CAAChB,QAFlB;AAGE,MAAA,OAAO,EAAEgB,KAAK,CAACf;AAHjB;AAAA;AAAA;AAAA;AAAA,YADF,eAME,QAAC,MAAD;AACE,MAAA,gBAAgB,EAAE,IADpB;AAEE,MAAA,gBAAgB,EAAEjD,MAFpB;AAGE,MAAA,QAAQ,EAAGoE,MAAD,IAAY;AACpB,cAAM;AAAE/D,UAAAA,UAAF;AAAcF,UAAAA;AAAd,YAA2BiE,MAAjC;AACA,cAAM3D,IAAI,GAAG;AAAEJ,UAAAA,UAAF;AAAcF,UAAAA;AAAd,SAAb;AACAmB,QAAAA,OAAO,CAACC,GAAR,CAAYd,IAAZ;AACA+B,QAAAA,eAAe,CACb/B,IADa,EAEb2C,SAAS,CAACa,OAFG,EAGbb,SAAS,CAACS,EAHG,EAIbN,kBAJa,EAKbd,oBALa,EAMbC,QANa,CAAf;AAQD,OAfH;AAgBE,MAAA,aAAa,EAAE;AACbrC,QAAAA,UAAU,EAAE,EADC;AAEbF,QAAAA,QAAQ,EAAE,EAFG;AAGbqD,QAAAA,cAAc,EAAEA,cAHH;AAIba,QAAAA,IAAI,EAAEZ;AAJO,OAhBjB;AAAA,gBAuBG,CAAC;AACAa,QAAAA,YADA;AAEAC,QAAAA,YAFA;AAGAC,QAAAA,UAHA;AAIAJ,QAAAA,MAJA;AAKAK,QAAAA,OALA;AAMAC,QAAAA,OANA;AAOAC,QAAAA;AAPA,OAAD,kBASC,QAAC,IAAD;AAAM,QAAA,UAAU,MAAhB;AAAiB,QAAA,QAAQ,EAAEL,YAA3B;AAAA,+BACE,QAAC,OAAD;AAAA,kCACE,QAAC,UAAD;AAAA,oCACE,QAAC,cAAD;AACE,cAAA,SAAS,EAAEpC,SADb;AAEE,cAAA,QAAQ,EAAEgC;AAFZ;AAAA;AAAA;AAAA;AAAA,oBADF,eAKE,QAAC,UAAD;AACE,cAAA,QAAQ,EAAE,YADZ;AAEE,cAAA,KAAK,EAAER,eAAe,CAACvC,YAFzB;AAGE,cAAA,QAAQ,EAAE,MAAM,CAAE;AAHpB;AAAA;AAAA;AAAA;AAAA,oBALF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAYE,QAAC,WAAD;AAAA,oCACE;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAIGuC,eAAe,CAACtC,UAAhB,CAA2BwC,MAA3B,iBACC;AAAA,0BAAIF,eAAe,CAACtC,UAAhB,CAA2BwC;AAA/B;AAAA;AAAA;AAAA;AAAA,sBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eASE;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAIGF,eAAe,CAACtC,UAAhB,CAA2B0B,MAA3B,CAAkCgB,WAAlC,iBACC;AAAA,0BAAIJ,eAAe,CAACtC,UAAhB,CAA2B0B,MAA3B,CAAkCgB;AAAtC;AAAA;AAAA;AAAA;AAAA,sBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBATF,EAiBGJ,eAAe,CAACtC,UAAhB,CAA2BwD,YAA3B,iBACC;AAAA,sCACE;AAAA,uCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AAAA,0BAAIlB,eAAe,CAACtC,UAAhB,CAA2BwD;AAA/B;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAlBJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAZF,eAuCE,QAAC,YAAD;AAAA,oCACE,QAAC,MAAD;AAAA,qCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE,QAAC,QAAD;AACE,cAAA,IAAI,EAAC,IADP;AAEE,cAAA,IAAI,EAAC,UAFP;AAGE,cAAA,KAAK,EAAER,MAAM,CAACjE,QAHhB;AAIE,cAAA,QAAQ,EAAEoE;AAJZ;AAAA;AAAA;AAAA;AAAA,oBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvCF,eAkDE,QAAC,SAAD;AAAA,mCACE,QAAC,IAAD,CAAM,GAAN;AAAU,cAAA,SAAS,EAAC,2CAApB;AAAA,sCACE,QAAC,IAAD,CAAM,KAAN;AAAY,gBAAA,MAAM,MAAlB;AAAmB,gBAAA,EAAE,EAAC,MAAtB;AAA6B,gBAAA,SAAS,EAAC,MAAvC;AAAA,uCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAKE,QAAC,GAAD;AAAK,gBAAA,SAAS,EAAC,MAAf;AAAsB,gBAAA,EAAE,EAAC,MAAzB;AAAA,wCACE,QAAC,IAAD,CAAM,OAAN;AACE,kBAAA,SAAS,EAAC,aADZ;AAEE,kBAAA,IAAI,EAAC,YAFP;AAGE,kBAAA,IAAI,EAAC,MAHP;AAIE,kBAAA,KAAK,EAAEH,MAAM,CAAC/D,UAJhB;AAKE,kBAAA,MAAM,EAAEmE,UALV;AAME,kBAAA,QAAQ,EAAED,YANZ;AAOE,kBAAA,WAAW,EAAC,cAPd;AAQE,kBAAA,OAAO,EAAEE,OAAO,CAACpE,UAAR,IAAsB,CAACsE,MAAM,CAACtE,UARzC;AASE,kBAAA,SAAS,EAAEoE,OAAO,CAACpE,UAAR,IAAsB,CAAC,CAACsE,MAAM,CAACtE;AAT5C;AAAA;AAAA;AAAA;AAAA,wBADF,eAYE,QAAC,IAAD,CAAM,OAAN,CAAc,QAAd;AACE,kBAAA,IAAI,EAAC,SADP;AAEE,kBAAA,SAAS,EAAC,4BAFZ;AAAA,yCAIE,QAAC,QAAD;AAAU,oBAAA,QAAQ,EAAC,OAAnB;AAA2B,oBAAA,SAAS,EAAE,CAAtC;AAAyC,oBAAA,OAAO,EAAC,QAAjD;AAAA,2CACE;AAAA,gCAAIsE,MAAM,CAACtE;AAAX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,wBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF,eA2BE,QAAC,IAAD,CAAM,KAAN;AAAY,gBAAA,MAAM,MAAlB;AAAmB,gBAAA,EAAE,EAAC,MAAtB;AAAA,uCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBA3BF,eA+BE,QAAC,GAAD;AAAK,gBAAA,SAAS,EAAC,MAAf;AAAA,uCACE,QAAC,IAAD,CAAM,OAAN;AACE,kBAAA,SAAS,EAAC,aADZ;AAEE,kBAAA,IAAI,EAAC,gBAFP;AAGE,kBAAA,IAAI,EAAC,MAHP;AAIE,kBAAA,KAAK,EAAE+D,MAAM,CAACZ,cAJhB;AAKE,kBAAA,MAAM,EAAEgB,UALV;AAME,kBAAA,QAAQ,EAAED,YANZ;AAOE,kBAAA,QAAQ;AAPV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBA/BF,eA0CE,QAAC,IAAD,CAAM,KAAN;AAAY,gBAAA,MAAM,MAAlB;AAAmB,gBAAA,EAAE,EAAC,MAAtB;AAAA,uCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBA1CF,eA8CE,QAAC,GAAD;AAAA,uCACE,QAAC,IAAD,CAAM,OAAN;AACE,kBAAA,SAAS,EAAC,aADZ;AAEE,kBAAA,IAAI,EAAC,MAFP;AAGE,kBAAA,IAAI,EAAC,MAHP;AAIE,kBAAA,KAAK,EAAEH,MAAM,CAACC,IAJhB;AAKE,kBAAA,MAAM,EAAEG,UALV;AAME,kBAAA,QAAQ,EAAED,YANZ;AAOE,kBAAA,QAAQ;AAPV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBA9CF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAlDF,eA8GE,QAAC,SAAD;AAAA,mCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBA9GF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAhCJ;AAAA;AAAA;AAAA;AAAA,YANF;AAAA,kBADF;AA+JD;;GAnNQrB,Y;;KAAAA,Y;AAqNT,MAAM2B,UAAU,GAAG/F,MAAM,CAACM,IAAD,CAAO;AAChC;AACA;AACA;AACA,CAJA;MAAMyF,U;AAMN,MAAMC,WAAW,GAAGhG,MAAM,CAACM,IAAD,CAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAVA;MAAM0F,W;AAYN,MAAMC,YAAY,GAAGjG,MAAM,CAACM,IAAD,CAAO;AAClC;AACA;AACA;AACA;AACA,CALA;MAAM2F,Y;AAON,MAAMC,MAAM,GAAGlG,MAAM,CAACmG,GAAI;AAC1B;AACA;AACA,sBAAsBlG,KAAK,CAACmG,KAAM;AAClC,WAAWnG,KAAK,CAACoG,SAAU;AAC3B;AACA;AACA;AACA;AACA,CATA;MAAMH,M;AAWN,MAAMI,QAAQ,GAAGtG,MAAM,CAACuG,QAAS;AACjC;AACA;AACA;AACA;AACA;AACA,WAAWtG,KAAK,CAACoG,SAAU;AAC3B;AACA;AACA,CATA;MAAMC,Q;AAWN,MAAME,SAAS,GAAGxG,MAAM,CAACO,MAAD,CAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAVA;MAAMiG,S;AAYN,MAAMC,SAAS,GAAGzG,MAAM,CAACM,IAAD,CAAO;AAC/B;AACA;AACA;AACA;AACA,sBAAsBL,KAAK,CAACmG,KAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAfA;MAAMK,S;AAiBN,MAAMC,OAAO,GAAG1G,MAAM,CAACmG,GAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA3BA;MAAMO,O;AA6BN,eAAetC,YAAf","sourcesContent":["import { useContext, useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport theme from \"../Assets/theme\";\r\nimport { AppContext } from \"../context\";\r\nimport { QuestionSlider, CodeEditor, AlertBar } from \"../components\";\r\nimport { Card, Button } from \"../components/defaultComponents\";\r\nimport { Formik, useFormik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport { Form, Col } from \"react-bootstrap\";\r\n// import \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport MuiAlert from \"@material-ui/lab/Alert\";\r\nimport axios, { handleAxiosError, handleUnexpectedError } from \"axios\";\r\nimport { utils } from \"../context\";\r\n\r\nconst schema = yup.object().shape({\r\n  feedback: yup.string(),\r\n  finalGrade: yup\r\n    .string()\r\n    .matches(/^([1-9]{1}(\\.\\d{1,2})?|10)$/, \"Format acceptat: 9.97\")\r\n    .required(\"Nota finală trebuie completată\"),\r\n});\r\n\r\nconst processData = (data) => {\r\n  try {\r\n    let { incercare, evaluareAutomata } = data;\r\n    data.incercare = JSON.parse(incercare);\r\n    data.evaluareAutomata = JSON.parse(evaluareAutomata);\r\n    const submission = [];\r\n    data.incercare.forEach((item, index) => {\r\n      submission.push({\r\n        // questionBody: data.questions[index],\r\n        questionCode: item,\r\n        assessment: data.evaluareAutomata[index],\r\n      });\r\n    });\r\n    return submission;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst getSubmission = async (\r\n  student_id,\r\n  test_id,\r\n  setSubmission,\r\n  setQuestions,\r\n  setIsLoading,\r\n  setAutomaticGrade,\r\n  setLateStatus\r\n) => {\r\n  try {\r\n    setIsLoading(true);\r\n    const { data } = await axios.get(\r\n      `${utils.rootURL}/grades/submission/${test_id}/${student_id}`\r\n    );\r\n    // console.log(data);\r\n    const submission = processData(data);\r\n    // console.log(submission);\r\n    setSubmission(submission);\r\n    setQuestions(data.questions);\r\n    setAutomaticGrade(data.notaAutomata);\r\n    setLateStatus(data.intarziat === 1 ? da : nu);\r\n  } catch (error) {\r\n    if (axios.isAxiosError(error)) {\r\n      handleAxiosError(error);\r\n    } else {\r\n      handleUnexpectedError(error);\r\n    }\r\n  }\r\n  setIsLoading(false);\r\n};\r\n\r\nconst gradeSubmission = async (\r\n  submission,\r\n  test_id,\r\n  student_id,\r\n  setIsLoading,\r\n  removeTestInProgress,\r\n  setAlert\r\n) => {\r\n  try {\r\n    setIsLoading(true);\r\n    const response = await axios({\r\n      method: \"put\",\r\n      url: `${utils.rootURL}/grades/grade/${test_id}/${student_id}`,\r\n      data: submission,\r\n    });\r\n\r\n    console.log(response);\r\n\r\n    if (response.status === 200) {\r\n      setAlert({\r\n        open: true,\r\n        severity: \"success\",\r\n        message: response.data.message,\r\n      });\r\n      // console.log(\"ceva\");\r\n      removeTestInProgress();\r\n    } else {\r\n      setAlert({\r\n        open: true,\r\n        severity: \"warning\",\r\n        message: response.data.message,\r\n      });\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n  setIsLoading(false);\r\n};\r\n\r\nfunction EvaluateTest() {\r\n  const { setShowNavbar, testState, removeTestInProgress } =\r\n    useContext(AppContext);\r\n  const [submission, setSubmission] = useState();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isSubmitLoading, setIsSubmitLoading] = useState(false);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [automaticGrade, setAutomaticGrade] = useState();\r\n  const [lateStatus, setLateStatus] = useState();\r\n  const [currentQuestion, setCurrentQuestion] = useState({\r\n    questionCode: \"\",\r\n    assessment: {\r\n      stdout: \"\",\r\n      status: { id: \"\", description: \"\" },\r\n    },\r\n    compile_output: \"\",\r\n  });\r\n  const [alert, setAlert] = useState({\r\n    open: false,\r\n    severity: \"success\",\r\n    message: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    console.log(\"esti in pagina de evaluare boss\");\r\n\r\n    if (testState.id) {\r\n      console.log(\"getting submission..\");\r\n      getSubmission(\r\n        testState.id,\r\n        testState.id_test,\r\n        setSubmission,\r\n        setQuestions,\r\n        setIsLoading,\r\n        setAutomaticGrade,\r\n        setLateStatus\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (submission) {\r\n      console.log(submission);\r\n      setCurrentQuestion(submission[0]);\r\n    }\r\n  }, [submission]);\r\n\r\n  const sliderHandler = (question, index) => {\r\n    setCurrentQuestion(submission[index]);\r\n  };\r\n\r\n  setShowNavbar(false);\r\n  return (\r\n    <>\r\n      <AlertBar\r\n        open={alert.open}\r\n        severity={alert.severity}\r\n        message={alert.message}\r\n      />\r\n      <Formik\r\n        validateOnSubmit={true}\r\n        validationSchema={schema}\r\n        onSubmit={(values) => {\r\n          const { finalGrade, feedback } = values;\r\n          const data = { finalGrade, feedback };\r\n          console.log(data);\r\n          gradeSubmission(\r\n            data,\r\n            testState.id_test,\r\n            testState.id,\r\n            setIsSubmitLoading,\r\n            removeTestInProgress,\r\n            setAlert\r\n          );\r\n        }}\r\n        initialValues={{\r\n          finalGrade: \"\",\r\n          feedback: \"\",\r\n          automaticGrade: automaticGrade,\r\n          late: lateStatus,\r\n        }}\r\n      >\r\n        {({\r\n          handleSubmit,\r\n          handleChange,\r\n          handleBlur,\r\n          values,\r\n          touched,\r\n          isValid,\r\n          errors,\r\n        }) => (\r\n          <Form noValidate onSubmit={handleSubmit}>\r\n            <Wrapper>\r\n              <EditorCard>\r\n                <QuestionSlider\r\n                  questions={questions}\r\n                  callback={sliderHandler}\r\n                ></QuestionSlider>\r\n                <CodeEditor\r\n                  language={\"javascript\"}\r\n                  value={currentQuestion.questionCode}\r\n                  callback={() => {}}\r\n                ></CodeEditor>\r\n              </EditorCard>\r\n              <ConsoleCard>\r\n                <div>\r\n                  <p>Output:</p>\r\n                  {/* {!isConsoleLoading && stdout && <p>{stdout}</p>}\r\n                {isConsoleLoading && <p>Loading...</p>} */}\r\n                  {currentQuestion.assessment.stdout && (\r\n                    <p>{currentQuestion.assessment.stdout}</p>\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  <p>Test Case Status:</p>\r\n                  {/* {!isConsoleLoading && testCaseStatus && <p>{testCaseStatus}</p>}\r\n                {isConsoleLoading && <p>Loading...</p>} */}\r\n                  {currentQuestion.assessment.status.description && (\r\n                    <p>{currentQuestion.assessment.status.description}</p>\r\n                  )}\r\n                </div>\r\n                {currentQuestion.assessment.compileError && (\r\n                  <div>\r\n                    <div>\r\n                      <p>Compile Error:</p>\r\n                    </div>\r\n                    <p>{currentQuestion.assessment.compileError}</p>\r\n                  </div>\r\n                )}\r\n              </ConsoleCard>\r\n\r\n              <FeedbackCard>\r\n                <Banner>\r\n                  <h2>Comentarii și feedback</h2>\r\n                </Banner>\r\n                <TextArea\r\n                  rows=\"20\"\r\n                  name=\"feedback\"\r\n                  value={values.feedback}\r\n                  onChange={handleChange}\r\n                ></TextArea>\r\n              </FeedbackCard>\r\n              <GradeCard>\r\n                <Form.Row className=\"justify-content-around align-items-center\">\r\n                  <Form.Label column lg=\"auto\" className=\"mr-2\">\r\n                    <div>Notă finală</div>\r\n                  </Form.Label>\r\n\r\n                  <Col className=\"mr-2\" lg=\"auto\">\r\n                    <Form.Control\r\n                      className=\"text-center\"\r\n                      name=\"finalGrade\"\r\n                      type=\"text\"\r\n                      value={values.finalGrade}\r\n                      onBlur={handleBlur}\r\n                      onChange={handleChange}\r\n                      placeholder=\"Introdu nota\"\r\n                      isValid={touched.finalGrade && !errors.finalGrade}\r\n                      isInvalid={touched.finalGrade && !!errors.finalGrade}\r\n                    />\r\n                    <Form.Control.Feedback\r\n                      type=\"invalid\"\r\n                      className=\"position-absolute feedback\"\r\n                    >\r\n                      <MuiAlert severity=\"error\" elevation={6} variant=\"filled\">\r\n                        <p>{errors.finalGrade}</p>\r\n                      </MuiAlert>\r\n                    </Form.Control.Feedback>\r\n                  </Col>\r\n\r\n                  <Form.Label column lg=\"auto\">\r\n                    <div>Notă automată</div>\r\n                  </Form.Label>\r\n\r\n                  <Col className=\"mr-2\">\r\n                    <Form.Control\r\n                      className=\"text-center\"\r\n                      name=\"automaticGrade\"\r\n                      type=\"text\"\r\n                      value={values.automaticGrade}\r\n                      onBlur={handleBlur}\r\n                      onChange={handleChange}\r\n                      readOnly\r\n                    />\r\n                  </Col>\r\n                  <Form.Label column lg=\"auto\">\r\n                    <div>Intarziat</div>\r\n                  </Form.Label>\r\n\r\n                  <Col>\r\n                    <Form.Control\r\n                      className=\"text-center\"\r\n                      name=\"late\"\r\n                      type=\"text\"\r\n                      value={values.late}\r\n                      onBlur={handleBlur}\r\n                      onChange={handleChange}\r\n                      readOnly\r\n                    />\r\n                  </Col>\r\n                </Form.Row>\r\n              </GradeCard>\r\n              <SubmitBtn>\r\n                <p>Trimite</p>\r\n              </SubmitBtn>\r\n            </Wrapper>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n\r\nconst EditorCard = styled(Card)`\r\n  grid-area: A;\r\n  margin-left: 1em;\r\n  overflow: auto;\r\n`;\r\n\r\nconst ConsoleCard = styled(Card)`\r\n  grid-area: B;\r\n  margin-left: 1em;\r\n  margin-top: 0.5em;\r\n  margin-bottom: 0.5em;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  overflow: auto;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst FeedbackCard = styled(Card)`\r\n  grid-area: C;\r\n  margin-right: 1em;\r\n  margin-bottom: 1rem;\r\n  padding: 0;\r\n`;\r\n\r\nconst Banner = styled.div`\r\n  padding: 0.7rem;\r\n  padding-left: 1.5rem;\r\n  background-color: ${theme.Grey1};\r\n  color: ${theme.mainBlack};\r\n  h2 {\r\n    margin: 0;\r\n    font-size: 1.3rem;\r\n  }\r\n`;\r\n\r\nconst TextArea = styled.textarea`\r\n  padding: 2rem;\r\n  border: none;\r\n  resize: none;\r\n  outline: none;\r\n  height:100%\r\n  color: ${theme.mainBlack};\r\n  border-radius: 0 0 10px 10px;\r\n  font-size: 1rem;\r\n`;\r\n\r\nconst SubmitBtn = styled(Button)`\r\n  grid-area: E;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-self: end;\r\n  justify-self: end;\r\n  width: 5rem;\r\n  height: 3rem;\r\n\r\n  margin-bottom: 0.5em;\r\n`;\r\n\r\nconst GradeCard = styled(Card)`\r\n  grid-area: D;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-right: 1em;\r\n  background-color: ${theme.Grey1};\r\n  // p {\r\n  //   margin: 0;\r\n  // }\r\n  div {\r\n    font-size: 1rem;\r\n  }\r\n  .feedback {\r\n    width: auto;\r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  display: grid;\r\n  height: 100%;\r\n  width: 100%;\r\n  margin-top: 1.5rem;\r\n  max-height: calc(93vh - 1.5rem);\r\n\r\n  font-size: 3rem;\r\n\r\n  p {\r\n    font-size: 1rem;\r\n  }\r\n\r\n  grid-template-columns: repeat(2, 1fr);\r\n  grid-template-rows: repeat(10, 1fr);\r\n  grid-template-areas:\r\n    \"A    C\"\r\n    \"A    C\"\r\n    \"A    C\"\r\n    \"A    C\"\r\n    \"A    C\"\r\n    \"A    C\"\r\n    \"A    D\"\r\n    \"B    E\"\r\n    \"B    E\"\r\n    \"B    E\";\r\n  grid-column-gap: 1em;\r\n`;\r\n\r\nexport default EvaluateTest;\r\n"]},"metadata":{},"sourceType":"module"}